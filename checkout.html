<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Checkout â€” TRAPPERREO</title>
<style>
:root{--accent:#8b5cf6;--bg:#000;--text:#fff}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:Arial,Helvetica,sans-serif;min-height:100vh;display:grid;place-items:center}
.card{width:min(92%,520px);background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:26px}
h1{font-size:24px;font-weight:900;margin-bottom:8px}
.row{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
.badge{border:1px solid rgba(255,255,255,.25);border-radius:8px;padding:8px 10px;background:rgba(255,255,255,.06)}
.btn{display:inline-block;padding:12px 16px;border:none;border-radius:10px;background:var(--accent);color:#000;font-weight:900;text-decoration:none;cursor:pointer}
.link{color:var(--accent);text-decoration:none}
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
const firebaseConfig={apiKey:"AIzaSyDF6BiYXreDirGnT3RPkGwDNlwj5ploUyo",authDomain:"trappereo.firebaseapp.com",projectId:"trappereo",storageBucket:"trappereo.firebasestorage.app",messagingSenderId:"767231932063",appId:"1:767231932063:web:b1431de1c04bbe5dc0d4aa",measurementId:"G-BDBRZQ6J8S"};
const app=initializeApp(firebaseConfig); const auth=getAuth(app);
// guard + popolamento
onAuthStateChanged(auth,(u)=>{
  if(!u){ const back=encodeURIComponent(location.pathname+location.search); location.href=`/login.html?from=${back}`; return; }
  document.addEventListener('DOMContentLoaded',()=>{
    document.getElementById('uemail').textContent=u.email||'';
    document.getElementById('uname').textContent=u.displayName||(u.email?u.email.split('@')[0]:'utente');
    document.getElementById('logoutBtn')?.addEventListener('click',async(e)=>{e.preventDefault();await signOut(auth);location.href='/index.html';});
  });
});
</script>
</head>
<body>
  <div class="card">
    <h1>Checkout TRAPPERREO</h1>
    <div>Accesso come: <strong id="uemail"></strong></div>
    <div style="margin-top:6px">Ciao <strong id="uname"></strong> ðŸ‘‹</div>

    <div class="row" style="margin-top:14px">
      <div class="badge">Sab 21 Mar 2026</div>
      <div class="badge">22:30 â†’ 04:30</div>
      <div class="badge">Via Italia 38, Biella</div>
      <div class="badge">Ticket Standard â€¢ 15â‚¬</div>
    </div>

    <div class="row" style="margin-top:18px">
      <a class="btn" href="#">Procedi al pagamento</a>
      <a id="logoutBtn" class="link" href="#">Logout</a>
    </div>
  </div>
</body>
</html>
